<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link rel="icon" href="/favicon.png" />
		<title>{{title}}</title>
		<style>
			.files {
				list-style: none;
				padding: 0;
				font-size: 16px;
				color: #111;
			}

			.files li {
				padding: 0;
			}

			.files li a {
				text-decoration: none;
				color: #333;
			}

			.breadcrumb {
				list-style: none;
				padding: 0;
				font-size: 18px;
				color: #000;
				font-weight: 800;
			}

			.breadcrumb li {
				display: inline-block;
			}
			.breadcrumb span {
				padding: 0 5px;
			}
			.breadcrumb a {
				cursor: pointer;
			}
			.a-upload {
				position: fixed;
				top: 10px;
				right: 10px;
				padding: 4px 10px;
				height: 20px;
				line-height: 20px;
				cursor: pointer;
				color: #888;
				background: #fafafa;
				border: 1px solid #ddd;
				border-radius: 4px;
				overflow: hidden;
				display: inline-block;
				*display: inline;
				*zoom: 1;
			}

			.a-upload input {
				position: absolute;
				font-size: 100px;
				right: 0;
				top: 0;
				opacity: 0;
				filter: alpha(opacity=0);
				cursor: pointer;
			}

			.a-upload:hover {
				color: #444;
				background: #eee;
				border-color: #ccc;
				text-decoration: none;
			}
		</style>
	</head>
	<body>
		<ul class="breadcrumb"></ul>
		<a href="javascript:;" class="a-upload">
			<input
				class="fileupload"
				type="file"
				name="file"
				onchange="onUpload(this)"
			/>
			上传文件
		</a>

		{{#each data}}
		<ul class="files">
			<li>
				<a href="{{url}}">
					{{#if isDir}}
					<svg
						t="1631325065212"
						class="icon"
						viewBox="0 0 1024 1024"
						version="1.1"
						xmlns="http://www.w3.org/2000/svg"
						p-id="4478"
						width="16"
						height="16"
					>
						<path
							d="M739.82 290.16H64.21V234.1c0-58.59 47.5-106.09 106.09-106.09h393.16c43.85 0 84.74 22.11 108.75 58.81l67.61 103.34z"
							fill="#FFBA53"
							p-id="4479"
						></path>
						<path
							d="M960.19 396.82v357.49c0 78.06-63.28 141.33-141.33 141.33H205.54c-78.06 0-141.33-63.28-141.33-141.33V255.49h754.64c78.06 0 141.34 63.28 141.34 141.33z"
							fill="#FFDC53"
							p-id="4480"
						></path>
					</svg>
					{{/if}} {{#if isJavascript}}
					<svg
						t="1631326156344"
						class="icon"
						viewBox="0 0 1024 1024"
						version="1.1"
						xmlns="http://www.w3.org/2000/svg"
						p-id="4731"
						width="16"
						height="16"
					>
						<path
							d="M659.72 64.19H270.4c-78.06 0-141.33 63.28-141.33 141.33v612.95c0 78.06 63.28 141.33 141.33 141.33h485.49c78.06 0 141.33-63.28 141.33-141.33V301.69c0-31.83-12.64-62.35-35.15-84.85l-117.5-117.5a120.017 120.017 0 0 0-84.85-35.15z"
							fill="#53B7F4"
							p-id="4732"
						></path>
						<path
							d="M862.07 216.84l-117.5-117.5a120.001 120.001 0 0 0-61.75-32.9v131.88c0 41.87 33.94 75.81 75.81 75.81H894a119.975 119.975 0 0 0-31.93-57.29zM410.97 407.96c-9.37-9.37-24.57-9.37-33.94 0L274.97 510.01c-9.37 9.37-9.37 24.57 0 33.94L377.02 646a23.919 23.919 0 0 0 16.97 7.03c6.14 0 12.29-2.34 16.97-7.03 9.37-9.37 9.37-24.57 0-33.94l-85.08-85.08 85.08-85.08c9.38-9.37 9.38-24.57 0.01-33.94zM649.25 407.96c-9.37-9.37-24.57-9.37-33.94 0-9.37 9.37-9.37 24.57 0 33.94l85.08 85.08-85.08 85.08c-9.37 9.37-9.37 24.57 0 33.94 4.69 4.69 10.83 7.03 16.97 7.03s12.28-2.34 16.97-7.03L751.3 543.95c9.37-9.37 9.37-24.57 0-33.94L649.25 407.96zM566.34 360.5c-12.64-3.99-26.12 3.02-30.11 15.66l-91.94 291.23c-3.99 12.64 3.02 26.12 15.66 30.11 2.4 0.76 4.84 1.12 7.23 1.12 10.19 0 19.65-6.55 22.88-16.78L582 390.61c3.99-12.64-3.02-26.12-15.66-30.11z"
							fill="#29A3D3"
							p-id="4733"
						></path>
						<path
							d="M410.97 395.96c-9.37-9.37-24.57-9.37-33.94 0L274.97 498.01c-9.37 9.37-9.37 24.57 0 33.94L377.02 634a23.919 23.919 0 0 0 16.97 7.03c6.14 0 12.29-2.34 16.97-7.03 9.37-9.37 9.37-24.57 0-33.94l-85.08-85.08 85.08-85.08c9.38-9.37 9.38-24.57 0.01-33.94zM751.31 498.01L649.25 395.96c-9.37-9.37-24.57-9.37-33.94 0-9.37 9.37-9.37 24.57 0 33.94l85.08 85.08-85.08 85.08c-9.37 9.37-9.37 24.57 0 33.94 4.69 4.69 10.83 7.03 16.97 7.03s12.28-2.34 16.97-7.03L751.3 531.95c9.38-9.37 9.38-24.56 0.01-33.94zM566.34 348.5c-12.64-3.99-26.12 3.02-30.11 15.66l-91.94 291.23c-3.99 12.64 3.02 26.12 15.66 30.11 2.4 0.76 4.84 1.12 7.23 1.12 10.19 0 19.65-6.55 22.88-16.78L582 378.61c3.99-12.64-3.02-26.12-15.66-30.11z"
							fill="#FFFFFF"
							p-id="4734"
						></path>
					</svg>
					{{/if}} {{#if isImage}}
					<svg
						t="1631326230542"
						class="icon"
						viewBox="0 0 1024 1024"
						version="1.1"
						xmlns="http://www.w3.org/2000/svg"
						p-id="5449"
						width="16"
						height="16"
					>
						<path
							d="M788.14 928.23h-550c-77.32 0-140-62.68-140-140v-550c0-77.32 62.68-140 140-140h550c77.32 0 140 62.68 140 140v550c0 77.32-62.68 140-140 140z"
							fill="#FFC757"
							p-id="5450"
						></path>
						<path
							d="M770.19 644.92l-67.56-117.01c-15.4-26.68-53.91-26.68-69.31 0l-64.01 110.88L450.3 432.65c-15.4-26.67-53.89-26.67-69.29 0L258.45 644.94c-15.4 26.67 3.85 60.01 34.65 60.01h442.44c30.8-0.01 50.05-33.35 34.65-60.03z"
							fill="#EF9F2B"
							p-id="5451"
						></path>
						<path
							d="M595.103921 388.209544a55.27 55.27 0 1 0 100.661393-45.676862 55.27 55.27 0 1 0-100.661393 45.676862Z"
							fill="#EF9F2B"
							p-id="5452"
						></path>
						<path
							d="M770.19 632.92l-67.56-117.01c-15.4-26.68-53.91-26.68-69.31 0l-64.01 110.88L450.3 420.65c-15.4-26.67-53.89-26.67-69.29 0L258.45 632.94c-15.4 26.67 3.85 60.01 34.65 60.01h442.44c30.8-0.01 50.05-33.35 34.65-60.03z"
							fill="#FFFFFF"
							p-id="5453"
						></path>
						<path
							d="M595.104335 376.209454a55.27 55.27 0 1 0 100.661392-45.676862 55.27 55.27 0 1 0-100.661392 45.676862Z"
							fill="#FFFFFF"
							p-id="5454"
						></path>
					</svg>
					{{/if}} {{#if other}}
					<svg
						t="1631326306978"
						class="icon"
						viewBox="0 0 1024 1024"
						version="1.1"
						xmlns="http://www.w3.org/2000/svg"
						p-id="5640"
						width="16"
						height="16"
					>
						<path
							d="M659.72 64.19H270.4c-78.06 0-141.33 63.28-141.33 141.33v612.95c0 78.06 63.28 141.33 141.33 141.33h485.49c78.06 0 141.33-63.28 141.33-141.33V301.69c0-31.83-12.64-62.35-35.15-84.85l-117.5-117.5a120.017 120.017 0 0 0-84.85-35.15z"
							fill="#C7DADD"
							p-id="5641"
						></path>
						<path
							d="M862.07 216.84l-117.5-117.5a120.001 120.001 0 0 0-61.75-32.9v131.88c0 41.87 33.94 75.81 75.81 75.81H894a119.975 119.975 0 0 0-31.93-57.29zM512.53 295.92c-82.1 0-148.9 66.8-148.9 148.9 0 12.53 10.15 22.68 22.68 22.68s22.68-10.15 22.68-22.68c0-57.09 46.45-103.54 103.54-103.54 27.63 0 53.62 10.78 73.19 30.35s30.35 45.57 30.35 73.19c0 21.11-6.31 41.41-18.24 58.71-11.68 16.92-27.89 29.89-46.9 37.48-37.11 14.83-61.08 49.9-61.08 89.33V632c0 12.53 10.15 22.68 22.68 22.68s22.68-10.15 22.68-22.68v-1.66c0-20.78 12.78-39.31 32.56-47.21 27.33-10.92 50.63-29.54 67.4-53.84 17.18-24.9 26.26-54.11 26.26-84.47 0-39.74-15.5-77.13-43.64-105.27-28.13-28.13-65.52-43.63-105.26-43.63z"
							fill="#9DC0C9"
							p-id="5642"
						></path>
						<path
							d="M500.973351 750.25961a30.24 30.24 0 1 0 23.144694-55.876234 30.24 30.24 0 1 0-23.144694 55.876234Z"
							fill="#9DC0C9"
							p-id="5643"
						></path>
						<path
							d="M618.4 327.31c-28.14-28.14-65.52-43.64-105.26-43.64-82.1 0-148.9 66.8-148.9 148.9 0 12.53 10.15 22.68 22.68 22.68s22.68-10.15 22.68-22.68c0-57.09 46.45-103.54 103.54-103.54 27.63 0 53.62 10.78 73.19 30.35s30.35 45.57 30.35 73.19c0 21.11-6.31 41.41-18.24 58.71-11.68 16.92-27.89 29.89-46.9 37.48-37.11 14.83-61.08 49.9-61.08 89.33v1.66c0 12.53 10.15 22.68 22.68 22.68s22.68-10.15 22.68-22.68v-1.66c0-20.78 12.78-39.31 32.56-47.21 27.33-10.92 50.63-29.54 67.4-53.84 17.18-24.9 26.26-54.11 26.26-84.47 0-39.74-15.5-77.12-43.64-105.26z"
							fill="#FFFFFF"
							p-id="5644"
						></path>
						<path
							d="M513.14 710.09m-30.24 0a30.24 30.24 0 1 0 60.48 0 30.24 30.24 0 1 0-60.48 0Z"
							fill="#FFFFFF"
							p-id="5645"
						></path>
					</svg>
					{{/if}} {{name}}</a
				>
			</li>
		</ul>
		{{/each}}
		<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script>
			var pathname = location.pathname;
			var array = pathname.split('/').filter(item => item !== '');

			var res = [
				{
					name: 'root',
					path: '/',
				},
			];

			for (var i = 0; i < array.length; i++) {
				if (i == 0) {
					res.push({
						name: array[i],
						path: res[res.length - 1].path + array[i],
					});
				} else {
					res.push({
						name: array[i],
						path: res[res.length - 1].path + '/' + array[i],
					});
				}
			}

			var lis = res
				.map(
					item => '<li><a href="' + item.path + '">' + item.name + '</a></li>',
				)
				.join('<span>\/</span>');

			var breadcrumb = document.querySelector('.breadcrumb');
			breadcrumb.innerHTML = lis;

			// upload
			function onUpload(target) {
				const formData = new FormData();
				formData.append('file', target.files[0]);
				formData.append('root', res[res.length - 1].path);

				$.ajax({
					url: '/api/upload',
					type: 'post',
					data: formData,
					cache: false,
					processData: false,
					contentType: false,
					success: function (res) {
						alert('upload success');
						location.reload();
					},
					error: function (error) {
						alert(error);
					},
				});
			}
		</script>
	</body>
</html>
